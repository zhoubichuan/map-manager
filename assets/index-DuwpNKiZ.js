import"./index-DgSUPdQ2.js";/* empty css                    */import{d as E,G as b,g as y,e as k,w as s,q as d,v as x,u as q,ck as B,x as u,m as D,cj as L,P as i}from"./index-DfxVvMlU.js";import{a as C}from"./Index.vue_vue_type_style_index_0_lang-BrdSJxIz.js";import"./index-DVABYH3N.js";const F=5*1024*1024,S=E({__name:"upload-template",props:{requestDownload:{type:Function,default:()=>{}},templateUrl:{type:String,default:""},requestUpload:{type:Function,default:()=>{}}},emits:["update:modelValue"],setup(l,{emit:p}){const m=p,f=async t=>{const{file:e,onSuccess:n,onError:a}=t;if(m("update:modelValue",e),e.size>F){a(new Error("文件大小超过限制，请上传小于5MB的图片"));return}try{const o=new FormData;o.append("file",e);const{c:U,m:v}=await l.requestUpload(o);U===200?i.success("上传成功！"):i.error(v)}catch(o){a(o),console.error("文件上传失败:",o)}},w=async()=>{let t;if(l.templateUrl)t=l.templateUrl;else{const n=await l.requestDownload();t=window.URL.createObjectURL(new Blob([n]))}const e=document.createElement("a");e.href=t,document.body.appendChild(e),e.click()},r=b([]),_=(t,e)=>{console.log(t,e)},g=t=>{console.log(t)},h=(t,e)=>{i.warning(`The limit is 3, you selected ${t.length} files this time, add up to ${t.length+e.length}`)};return(t,e)=>{const n=x,a=L;return k(),y(a,D({"file-list":r.value,"onUpdate:fileList":e[0]||(e[0]=o=>r.value=o),class:"web-upload-template",action:"#","on-preview":g,"http-request":f,"on-remove":_},t.$attrs,{limit:1,"on-exceed":h}),{tip:s(()=>[d(n,{class:"download",link:"",onClick:w},{default:s(()=>e[2]||(e[2]=[u("下载模板")])),_:1,__:[2]})]),default:s(()=>[d(n,{disabled:r.value.length,icon:q(B)},{default:s(()=>e[1]||(e[1]=[u("上传文件")])),_:1,__:[1]},8,["disabled","icon"])]),_:1},16,["file-list"])}}}),c=C(S,[["__scopeId","data-v-996c475e"]]);c.install=function(l){l.component(c.name,c)};export{c as default};
