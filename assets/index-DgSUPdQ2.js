const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BKC0aV2-.js","assets/index-DfxVvMlU.js","assets/index-CLT_sCrb.css","assets/Index.vue_vue_type_style_index_0_lang-BrdSJxIz.js","assets/index-DVABYH3N.js","assets/Index-BX4FmeTQ.css","assets/index-DPpOHU-g.css","assets/index-3yq7bxPe.js","assets/index-CVlwITd_.css","assets/index-C5-oU42h.js","assets/index-CL1pplaZ.css","assets/index-LkeRh0_j.js","assets/index-DN9YyZCU.css","assets/index-B-6Dri_M.js","assets/index-CYmNN_6J.css","assets/el-select-B_FDKkzZ.css","assets/index-C-jid-yX.js","assets/index-CkhCzSaG.js","assets/index-DbreObiv.css","assets/index-COgKc42m.css","assets/index-BjNuPHk-.js","assets/index-B0CJ_umV.css","assets/index-D6cqxnkF.js","assets/index-DPqsmOiD.css","assets/index-KPgxiPrD.js","assets/index-UDwarak6.js","assets/index-BEn5xcjx.css","assets/index-CLo2sb7k.css","assets/index-JooHFB8_.js","assets/index-DwuD-cUh.css","assets/el-progress-DBWeHy1f.css","assets/index-DuwpNKiZ.js","assets/index-BFWYZvVr.css"])))=>i.map(i=>d[i]);
import{d as $,f as M,i as ge,c as R,e as m,g as w,h as I,w as r,F as j,r as N,E as de,j as ve,k as he,m as L,t as ye,u as n,l as ce,_ as z,n as te,p as ue,q as _,s as P,v as A,x as S,y as be,z as me,A as Ce,B as fe,C as ie,D as we,G as h,H as ke,b as Y,I as K,J as ne,K as De,L as Ee,M as Se,N as G,O as B,o as $e,P as W,Q as ae,R as oe,S as le,T as Ve,U as Re,V as Pe,W as Me,X as re}from"./index-DfxVvMlU.js";import{a as pe,d as ze,q as Fe,_ as se}from"./Index.vue_vue_type_style_index_0_lang-BrdSJxIz.js";import"./index-DVABYH3N.js";const Ie={class:"web-from-item"},Le=["innerHTML"],Ae=$({name:"WebFormItem",components:{input:M(()=>z(()=>import("./index-BKC0aV2-.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),"input-number":M(()=>z(()=>import("./index-3yq7bxPe.js"),__vite__mapDeps([7,1,2,3,4,5,8]))),"input-more":M(()=>z(()=>import("./index-C5-oU42h.js"),__vite__mapDeps([9,1,2,3,4,5,10]))),"input-button":M(()=>z(()=>import("./index-LkeRh0_j.js"),__vite__mapDeps([11,1,2,3,4,5,12]))),select:M(()=>z(()=>import("./index-B-6Dri_M.js"),__vite__mapDeps([13,1,2,3,4,5,14,15]))),"select-image":M(()=>z(()=>import("./index-C-jid-yX.js"),__vite__mapDeps([16,17,1,2,3,4,5,18,15,19]))),cascader:M(()=>z(()=>import("./index-BjNuPHk-.js"),__vite__mapDeps([20,1,2,21]))),rich:M(()=>z(()=>import("./index-D6cqxnkF.js"),__vite__mapDeps([22,1,2,3,4,5,23]))),"transfer-cascader-panel":M(()=>z(()=>import("./index-KPgxiPrD.js").then(e=>e.i),__vite__mapDeps([24,1,2,17,3,4,5,18,15,25,26,27]))),"cascader-panel":M(()=>z(()=>import("./index-UDwarak6.js"),__vite__mapDeps([25,1,2,3,4,5,26]))),upload:M(()=>z(()=>import("./index-JooHFB8_.js"),__vite__mapDeps([28,1,2,3,4,5,29,30]))),"upload-template":M(()=>z(()=>import("./index-DuwpNKiZ.js"),__vite__mapDeps([31,1,2,3,4,5,32,30])))},__name:"form-item",props:{formData:{type:Array,default:()=>[]}},setup(e){const i=ge("formModel");return(l,a)=>{const o=ve,p=de,s=ce;return m(),R("div",Ie,[e.formData.length?(m(),w(s,{key:0,gutter:20},{default:r(()=>[(m(!0),R(j,null,N(e.formData,(t,c)=>(m(),w(p,{span:24/e.formData.length,key:c},{default:r(()=>[JSON.stringify(t)!=="{}"?(m(),w(o,{key:0,label:t.label,prop:t.prop},{default:r(()=>[t.type==="div"?(m(),R("div",{key:0,class:"rich",contenteditable:"true",innerHTML:t.init},null,8,Le)):(m(),w(he(t.type),L({key:1,ref_for:!0},t.component,{modelValue:n(i)[t.prop],"onUpdate:modelValue":f=>n(i)[t.prop]=f},ye(t.fn)),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label","prop"])):I("",!0)]),_:2},1032,["span"]))),128))]),_:1})):I("",!0)])}}}),T=pe(Ae,[["__scopeId","data-v-eeaeed8d"]]);T.install=function(e){e.component(T.name,T)};const Ye={key:0,style:{float:"right"},class:"handle-btn"},Q=$({name:"WebFormSearch",__name:"form-search",props:{formCreate:{type:Function,default:()=>{}},searchForm:{type:Array,default:()=>[]},reloadFn:{type:Function,default:()=>{}}},setup(e,{expose:i}){const l=te({}),a=()=>e.searchForm.forEach(s=>{s&&s.forEach(t=>{t.prop&&(l[t.prop]=t.init||"")})});a();const o=()=>{e.reloadFn(l)},p=()=>{a(),e.reloadFn(l)};return fe("formModel",l),i({getModel:()=>l}),(s,t)=>{const c=A,f=de,k=ce,D=Ce("web-form"),y=ue;return m(),w(y,{class:"page-search",style:{"margin-top":"10px"}},{default:r(()=>[_(D,{size:"middle",ref:"searchInfoRef",model:l},{default:r(()=>[e.searchForm.length?(m(!0),R(j,{key:0},N(e.searchForm,(g,d)=>(m(),w(n(T),{"form-data":g,key:d,"label-width":"70px"},null,8,["form-data"]))),128)):I("",!0),_(k,null,{default:r(()=>[_(f,{span:200,style:{width:"100%"}},{default:r(()=>[P(s.$slots,"default",{},()=>[_(c,{onClick:e.formCreate,type:"primary"},{default:r(()=>t[0]||(t[0]=[S(" 创建 ")])),_:1,__:[0]},8,["onClick"])]),e.searchForm.length?(m(),R("div",Ye,[_(c,{icon:n(be),onClick:p},{default:r(()=>t[1]||(t[1]=[S("重置")])),_:1,__:[1]},8,["icon"]),_(c,{icon:n(me),onClick:o,type:"primary"},{default:r(()=>t[2]||(t[2]=[S("查询")])),_:1,__:[2]},8,["icon"])])):I("",!0)]),_:3})]),_:3})]),_:3},8,["model"])]),_:3})}}});Q.install=function(e){e.component(Q.name,Q)};const Te=[[{prop:"gfids",label:"gfid",type:"input",component:{placeholder:"请输入"}},{},{},{}]],xe=$({__name:"form-search",props:{ids:{type:String,default:""}},emits:["create","search","batchDel","batchView"],setup(e,{emit:i}){const l=i,a=t=>{l("create",t)},o=()=>{l("batchDel")},p=()=>{l("batchView")},s=t=>{l("search",t)};return(t,c)=>{const f=A;return m(),w(n(Q),{"search-form":n(Te),reloadFn:s},{default:r(()=>[_(f,{icon:n(ie),onClick:c[0]||(c[0]=k=>a("circle")),type:"primary"},{default:r(()=>c[2]||(c[2]=[S("创建圆形围栏")])),_:1,__:[2]},8,["icon"]),_(f,{icon:n(ie),onClick:c[1]||(c[1]=k=>a("polygon")),type:"primary"},{default:r(()=>c[3]||(c[3]=[S("创建多边形围栏")])),_:1,__:[3]},8,["icon"]),_(f,{icon:n(we),onClick:o,disabled:!e.ids},{default:r(()=>c[4]||(c[4]=[S("批量删除")])),_:1,__:[4]},8,["icon","disabled"]),_(f,{icon:n(me),onClick:p},{default:r(()=>c[5]||(c[5]=[S("批量查看")])),_:1,__:[5]},8,["icon"])]),_:1},8,["search-form"])}}}),Oe={class:"header"},Be={class:"title"},We={key:0},qe={key:0,class:"footer"},He=$({name:"WebTable",__name:"table",props:{config:{type:Object,default:()=>({needCreate:!1,hasSelection:!1})},data:{type:Array,default:()=>[]},pageInfo:{type:Object,default:()=>({})}},emits:["toEdit","toDelete","toCreate","changePageSize","changeCurrentPage","selectChange"],setup(e,{expose:i,emit:l}){const a=h();ke(()=>({...e.pageInfo}),g=>{a.value={...g}},{immediate:!0});const o=l,p=g=>{o("selectChange",g)},s=g=>{o("toEdit",g)},t=g=>{o("toDelete",g)},c=()=>{},f=g=>{o("changePageSize",{...a.value,pageSize:g})},k=g=>{o("changeCurrentPage",{...a.value,currentPage:g})},D=h();return i({clearSelection:()=>{var g;(g=D.value)==null||g.clearSelection()}}),(g,d)=>{const u=De,v=ue;return m(),w(v,{style:{"margin-top":"10px"}},{default:r(()=>{var b,C,F;return[Y("div",Oe,[Y("div",Be,[(b=e.config)!=null&&b.title?(m(),R("span",We)):I("",!0),Y("h5",null,K((C=e.config)==null?void 0:C.title),1)]),(F=e.config)!=null&&F.needCreate?(m(),w(n(A),{key:0,onClick:c,type:"primary"},{default:r(()=>{var E;return[S(" 新建"+K((E=e.config.title)==null?void 0:E.slice(0,2)),1)]}),_:1})):I("",!0)]),_(n(Ee),{ref_key:"tableRef",ref:D,onSelectionChange:p,data:e.data,border:"",style:{width:"100%"},stripe:""},{empty:r(()=>[_(u,{"image-size":200,description:"暂无数据"})]),default:r(()=>{var E,q;return[e.config.hasSelection?(m(),w(n(ne),{key:0,type:"selection",width:"55"})):I("",!0),(m(!0),R(j,null,N(e.config.tableItems,V=>(m(),w(n(ne),L({key:V.label,ref_for:!0},V,{prop:V.prop,label:V.label,width:V==null?void 0:V.width}),G({_:2},[V.formatter?void 0:{name:"default",fn:r(J=>[P(g.$slots,V.prop,{row:J.row},()=>[S(K(J.row[V.prop]),1)],!0)]),key:"0"}]),1040,["prop","label","width"]))),128)),e.config.isEdit?(m(),w(n(ne),{key:1,label:"操作",width:(E=e.config)!=null&&E.editWidth?(q=e.config)==null?void 0:q.editWidth:"100",fixed:"right"},{default:r(V=>[P(g.$slots,"handler",{row:V.row},()=>[Y("div",null,[_(n(A),{type:"primary",size:"middle",link:"",onClick:J=>s(V.row)},{default:r(()=>d[2]||(d[2]=[S("修改")])),_:2,__:[2]},1032,["onClick"]),_(n(A),{type:"danger",onClick:J=>t(V.row.id),size:"middle",link:""},{default:r(()=>d[3]||(d[3]=[S("删除")])),_:2,__:[3]},1032,["onClick"])])],!0)]),_:3},8,["width"])):I("",!0)]}),_:3},8,["data"]),a.value&&e.data.length!==0?(m(),R("div",qe,[_(n(Se),{background:"",currentPage:a.value.currentPage,"onUpdate:currentPage":d[0]||(d[0]=E=>a.value.currentPage=E),"page-size":a.value.pageSize,"onUpdate:pageSize":d[1]||(d[1]=E=>a.value.pageSize=E),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:a.value.totalCount,onSizeChange:f,onCurrentChange:k},null,8,["currentPage","page-size","total"])])):I("",!0)]}),_:3})}}}),X=pe(He,[["__scopeId","data-v-486e3b1f"]]);X.install=function(e){e.component(X.name,X)};const Ue={title:"",editWidth:"180",isEdit:!0,needCreate:!1,hasSelection:!0,tableItems:[{prop:"gfid",label:"gfid",width:"90"},{prop:"shape",label:"形状",width:"80",formatter:({shape:e})=>e!=null&&e.center?"圆形":"多边形"},{prop:"name",label:"名称",width:"140"},{prop:"desc",label:"描述"},{prop:"createtime",label:"创建时间",formatter:({createtime:e})=>B(e).format("YYYY-MM-DD hh:mm:ss"),width:"180"},{prop:"modifytime",label:"更新时间",formatter:({modifytime:e})=>B(e).format("YYYY-MM-DD hh:mm:ss"),width:"180"}]},je=(e,i)=>{const l=h([]),a=te({totalCount:0,currentPage:1,pageSize:10}),o=async()=>{const{data:t}=await i({...e,page:a.currentPage,pageSize:a.pageSize});if(t.errcode===1e4){const{count:c,results:f}=t.data;l.value.splice(0,l.value.length,...f),a.totalCount=c}},p=({currentPage:t})=>{a.currentPage=t,o()},s=({pageSize:t})=>{a.pageSize=t,o()};return $e(()=>{o()}),{tableData:l,pageInfo:a,reloadData:o,handleCurrentChange:p,handleSizeChange:s}},Ne=$({__name:"table-show",emits:["del","edit","view"],setup(e,{expose:i,emit:l}){const a=l,o=h(""),p=u=>{o.value=u.map(v=>v.gfid).join(",")},s=async u=>{const v=u?u.gfid:o.value,b=await ze({gfid:v});(b==null?void 0:b.errcode)===1e4?(o.value="",W.success("删除成功"),y()):W.error(b==null?void 0:b.errdetail)},t=u=>{a("edit",u)},c=async u=>{a("view",u)},f=te({}),{tableData:k,pageInfo:D,reloadData:y,handleCurrentChange:g,handleSizeChange:d}=je(f,Fe);return i({ids:o,handleDel:s,reloadData:u=>{u&&Object.keys(u).forEach(v=>{f[v]=u[v]}),y()},handleCurrentChange:g,handleSizeChange:d,getSearchParams:()=>f}),(u,v)=>{const b=A;return m(),w(n(X),{config:n(Ue),data:n(k)??[],"page-info":n(D),onChangePageSize:n(d),onChangeCurrentPage:n(g),onSelectChange:p},{handler:r(C=>[Y("div",null,[_(b,{type:"text",onClick:F=>c(n(C.row))},{default:r(()=>v[0]||(v[0]=[S("查看")])),_:2,__:[0]},1032,["onClick"]),_(b,{disabled:C.row.ntfCreateStatus==0,type:"text",onClick:F=>t(n(C.row))},{default:r(()=>v[1]||(v[1]=[S("编辑")])),_:2,__:[1]},1032,["disabled","onClick"]),_(b,{disabled:C.row.ntfCreateStatus==0,type:"text",onClick:F=>s(n(C.row))},{default:r(()=>v[2]||(v[2]=[S("删除")])),_:2,__:[2]},1032,["disabled","onClick"])])]),_:1},8,["config","data","page-info","onChangePageSize","onChangeCurrentPage"])}}}),H=$({name:"WebButton",__name:"button",setup(e){const i=ae();return(l,a)=>{const o=A;return m(),w(o,L({class:"web-button"},l.$attrs),G({_:2},[n(i).default?{name:"default",fn:r(()=>[P(l.$slots,"default")]),key:"0"}:void 0,n(i).loading?{name:"loading",fn:r(p=>[P(l.$slots,"loading",oe(le(p)))]),key:"1"}:void 0,n(i).icon?{name:"icon",fn:r(p=>[P(l.$slots,"icon",oe(le(p)))]),key:"2"}:void 0]),1040)}}});H.install=function(e){e.component(H.name,H)};const Ge={key:0,class:"dialog-title"},Je={key:0,class:"dialog-footer"},x=$({name:"WebDialog",__name:"dialog",props:{mold:{type:String,default:"create"},size:{type:String,default:"middle"}},emits:["handleCancel","handleConfirm"],setup(e,{emit:i}){const l=i,a=s=>{l("handleCancel",s)},o=ae(),p=()=>{l("handleConfirm")};return(s,t)=>{const c=Ve;return m(),w(c,L({"modal-class":"web-modal",class:{"web-dialog":!0,[e.size]:!0},"lock-scroll":"","destroy-on-close":"",onClose:t[1]||(t[1]=f=>a("icon"))},s.$attrs),G({default:r(()=>[P(s.$slots,"default",{},()=>[t[2]||(t[2]=Y("p",null,"弹窗内容自定义",-1))])]),_:2},[n(o).header?{name:"header",fn:r(()=>[P(s.$slots,"header")]),key:"0"}:void 0,s.$slots.title||e.mold.includes("message")?{name:"title",fn:r(()=>[e.mold.includes("message")?(m(),R("span",Ge,"提示 ")):P(s.$slots,"title",{key:1})]),key:"1"}:void 0,n(o).footer||e.mold.includes("edit")||e.mold.includes("create")?{name:"footer",fn:r(()=>[e.mold.includes("edit")||e.mold.includes("create")?(m(),R("span",Je,[_(n(H),{onClick:t[0]||(t[0]=f=>a("button"))},{default:r(()=>t[3]||(t[3]=[S("取 消")])),_:1,__:[3]}),_(n(H),{type:"primary",onClick:p},{default:r(()=>t[4]||(t[4]=[S("确 定")])),_:1,__:[4]})])):P(s.$slots,"footer",{key:1})]),key:"2"}:void 0]),1040,["class"])}}});x.install=function(e){e.component(x.name,x)};const U=$({name:"WebForm",__name:"form",setup(e,{expose:i}){const l=h();return i({validate:a=>{var o;return(o=l.value)==null?void 0:o.validate(a)}}),(a,o)=>(m(),w(n(Re),L({ref_key:"formRef",ref:l,class:"demo-ruleForm"},a.$attrs),{default:r(p=>[P(a.$slots,"default",oe(le(p)))]),_:3},16))}});U.install=function(e){e.component(U.name,U)};const Z=$({name:"WebCollapse",__name:"collapse",setup(e){const i=ae();return(l,a)=>{const o=Pe;return m(),w(o,L({class:"web-collapse"},l.$attrs),G({_:2},[n(i).default?{name:"default",fn:r(()=>[P(l.$slots,"default")]),key:"0"}:void 0]),1040)}}});Z.install=function(e){e.component(Z.name,Z)};const ee=$({name:"WebCollapseItem",__name:"collapse-item",setup(e){const i=ae();return(l,a)=>{const o=Me;return m(),w(o,L({class:"web-collapse-item"},l.$attrs),G({_:2},[n(i).default?{name:"default",fn:r(()=>[P(l.$slots,"default")]),key:"0"}:void 0]),1040)}}});ee.install=function(e){e.component(ee.name,ee)};const Ke={key:0,class:"form-create"},O=$({name:"WebFormCreate",__name:"form-create",props:{arrow:{type:Boolean,default:!1},request:{type:Function,default:()=>{}},formData:{type:Array,default:()=>[]}},emits:["reloadList","update:modelValue","handleChange"],setup(e,{expose:i,emit:l}){const a=h(["1"]),o=f=>{console.log(f)},p=h(),s=te({});return e.formData.forEach(f=>{f.forEach(k=>{k.prop&&(s[k.prop]=k.init||"")})}),fe("formModel",s),i({validate:()=>{var f;(f=p.value)==null||f.validate(async k=>{k&&e.request(s)})}}),(f,k)=>e.arrow?(m(),R("div",Ke,[_(n(Z),{modelValue:a.value,"onUpdate:modelValue":k[0]||(k[0]=D=>a.value=D),onChange:o},{default:r(()=>[_(n(ee),{name:"1"},{default:r(()=>[_(n(U),L({ref_key:"formRef",ref:p,model:s,"label-width":"80px"},f.$attrs),{default:r(()=>[(m(!0),R(j,null,N(e.formData,(D,y)=>(m(),w(n(T),{formData:D,key:y},null,8,["formData"]))),128))]),_:1},16,["model"])]),_:1})]),_:1},8,["modelValue"])])):(m(),w(n(U),L({key:1,ref_key:"formRef",ref:p,model:s,"label-width":"80px"},f.$attrs),{default:r(()=>[(m(!0),R(j,null,N(e.formData,(D,y)=>(m(),w(n(T),{formData:D,key:y},null,8,["formData"]))),128))]),_:1},16,["model"]))}});O.install=function(e){e.component(O.name,O)};const _e={name:[{required:!0,message:"请输入名称",trigger:"blur"}],desc:[{required:!0,message:"请输入说明",trigger:"blur"}]},Qe=$({__name:"dialog-create",emits:["reloadList"],setup(e,{expose:i,emit:l}){const a=h(),o=h([]),p=h(),s=h(!1),t=()=>{s.value=!1},c=l,f=()=>{var d;(d=a.value)==null||d.startCreate(y.value)},k=()=>{var d;(d=p.value)==null||d.validate()},D=async d=>{var v,b,C;d.type=y.value;const u=await((v=a.value)==null?void 0:v.finishedCreate(d));((b=u==null?void 0:u.data)==null?void 0:b.errcode)===1e4?(W.success("创建成功"),c("reloadList"),t()):W.error((C=u==null?void 0:u.data)==null?void 0:C.errdetail)},y=h("circle");return i({handleCreate:d=>{y.value=d,o.value=[[{prop:"type",label:"围栏类型",init:y.value==="circle"?"圆形":"多边形",type:"div"},{prop:"name",label:"围栏名称",type:"input",component:{placeholder:"请输入围栏名称"}}],[{prop:"desc",label:"围栏描述",type:"input",component:{placeholder:"请输入围栏描述"}}]],s.value=!0}}),(d,u)=>(m(),w(n(x),{mold:"create",size:"big",title:"创建",modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=v=>s.value=v),onHandleCancel:t,onHandleConfirm:k},{default:r(()=>[_(n(O),{ref_key:"modelRef",ref:p,request:D,formData:o.value,rules:n(_e)},null,8,["formData","rules"]),_(se,{ref_key:"mapRef",ref:a,type:"create",onMapMounted:f},null,512)]),_:1},8,["modelValue"]))}}),Xe=$({__name:"dialog-edit",emits:["reloadList"],setup(e,{expose:i,emit:l}){const a=h(),o=h([]),p=h(),s=h(""),t=h([]),c=h(!1),f=()=>{c.value=!1},k=l,D=async()=>{var d;(d=p.value)==null||d.validate()},y=async d=>{var C;const{name:u,desc:v}=d,{data:b}=await((C=a.value)==null?void 0:C.finishedEdit({name:u,desc:v}));b.errcode===1e4?(k("reloadList"),f(),W.success("修改成功")):W.error(b.errdetail)};return i({handleEdit:async d=>{const{createtime:u,desc:v,gfid:b,modifytime:C,name:F,shape:E}=d;s.value=String(b),t.value=E.center?E.center.split(","):E.points.split(";")[0].split(","),o.value=[[{prop:"gfid",label:"gfid",init:b,type:"div"},{prop:"type",label:"围栏类型",init:E.center?"圆形":"多边形",type:"div"}],[{prop:"name",label:"围栏名称",type:"input",init:F,component:{placeholder:"请输入围栏名称"}},{prop:"desc",label:"围栏描述",type:"input",init:v,component:{placeholder:"请输入围栏描述"}}],E.center?[{prop:"center",label:"中心点",type:"div",init:E.center},{prop:"radius",label:"半径(米)",type:"div",init:E.radius}]:[{prop:"points",label:"路径",type:"div",init:E.points}],[{prop:"createtime",label:"创建时间",type:"div",init:B(u).format("YYYY-MM-DD hh:mm:ss")},{prop:"createtime",label:"更新时间",type:"div",init:B(C).format("YYYY-MM-DD hh:mm:ss")}]],c.value=!0,re(()=>{var q;(q=a.value)==null||q.getMapList({gfids:b})})}}),(d,u)=>(m(),w(n(x),{mold:"edit",size:"big",title:"编辑",modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=v=>c.value=v),onHandleCancel:f,onHandleConfirm:D},{default:r(()=>[_(n(O),{ref_key:"modelRef",ref:p,request:y,formData:o.value,rules:n(_e)},null,8,["formData","rules"]),_(se,{ref_key:"mapRef",ref:a,type:"edit",gfid:s.value,"statrAddress:":t.value},null,8,["gfid","statrAddress:"])]),_:1},8,["modelValue"]))}}),Ze=$({__name:"dialog-view",setup(e,{expose:i}){const l=h(),a=h(""),o=h(!0),p=h([]),s=h([]),t=h(!1),c=()=>{t.value=!1},f=()=>{};return i({singleView:async y=>{o.value=!0;const{createtime:g,desc:d,gfid:u,modifytime:v,name:b,shape:C}=y;a.value=String(u),p.value=C.center?C.center.split(","):C.points.split(";")[0].split(","),s.value=[[{prop:"gfid",label:"gfid",init:u,type:"div"},{prop:"type",label:"围栏类型",init:C.center?"圆形":"多边形",type:"div"}],[{prop:"name",label:"围栏名称",type:"div",init:b},{prop:"desc",label:"围栏描述",type:"div",init:d}],C.center?[{prop:"center",label:"中心点",type:"div",init:C.center},{prop:"radius",label:"半径(米)",type:"div",init:C.radius}]:[{prop:"points",label:"路径",type:"div",init:C.points}],[{prop:"createtime",label:"创建时间",type:"div",init:B(g).format("YYYY-MM-DD hh:mm:ss")},{prop:"createtime",label:"更新时间",type:"div",init:B(v).format("YYYY-MM-DD hh:mm:ss")}]],t.value=!0,re(()=>{var F;(F=l.value)==null||F.getMapList({gfids:u})})},batchView:async()=>{a.value="",p.value=[113.539333,22.242564],o.value=!1,t.value=!0,re(()=>{var y;(y=l.value)==null||y.getMapList()})}}),(y,g)=>(m(),w(n(x),L({mold:"view",size:"big",title:"查看",modelValue:t.value,"onUpdate:modelValue":g[0]||(g[0]=d=>t.value=d)},{...y.$attrs},{onHandleCancel:c,onHandleConfirm:f}),{default:r(()=>[o.value?(m(),w(n(O),{key:0,ref:"modelRef",formData:s.value},null,8,["formData"])):I("",!0),_(se,{ref_key:"mapRef",ref:l,type:"view",gfid:a.value,"statrAddress:":p.value},null,8,["gfid","statrAddress:"])]),_:1},16,["modelValue"]))}}),et={class:"table-page"},ot=$({__name:"index",setup(e){const i=h(),l=h(),a=h(),o=h();return(p,s)=>{var t,c,f,k,D,y,g,d,u,v;return m(),R("div",et,[S(K((t=i.value)==null?void 0:t.ids)+" ",1),_(xe,{class:"search-part",onCreate:(c=l.value)==null?void 0:c.handleCreate,onSearch:(f=i.value)==null?void 0:f.reloadData,onBatchDel:(k=i.value)==null?void 0:k.handleDel,onBatchView:(D=o.value)==null?void 0:D.batchView,ids:(y=i.value)==null?void 0:y.ids},null,8,["onCreate","onSearch","onBatchDel","onBatchView","ids"]),_(Ne,{class:"table-part",ref_key:"tableRef",ref:i,onView:(g=o.value)==null?void 0:g.singleView,onEdit:(d=a.value)==null?void 0:d.handleEdit},null,8,["onView","onEdit"]),_(Qe,{ref_key:"viewCreate",ref:l,onReloadList:(u=i.value)==null?void 0:u.reloadData},null,8,["onReloadList"]),_(Xe,{ref_key:"viewEdit",ref:a,onReloadList:(v=i.value)==null?void 0:v.reloadData},null,8,["onReloadList"]),_(Ze,{ref_key:"viewRef",ref:o},null,512)])}}});export{ot as default};
